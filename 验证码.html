<!DOCTYPE html>
<html>
<head>
	<title>验证码</title>
	<style type="text/css">
		body{
			text-align: center;
		}
		canvas{
			background: #ddd;
		}
	</style>
</head>
<body>
	<h1>验证码</h1>
	<canvas id="yzm" width="120" height="30" ></canvas>

	<script type="text/javascript">
		var yzm = document.getElementById("yzm")
		var ctx = yzm.getContext("2d")

		//随机背景
		ctx.fillStyle = rc(1,255)
		ctx.fillRect(0,0,120,30)


		var pool = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
		for(var i=0;i<5;i++){
			var c = pool[rn(0,pool.length)]
			// console.log(c)
			ctx.fillStyle=rc(1,255)
			//随机字母 
			ctx.textBaseline = "top"
			ctx.font = `20px 楷体`
			ctx.fillText(c,i*20+10,10)

			//随机线条
			ctx.moveTo(rn(0,120),rn(0,30))
			ctx.lineTo(rn(0,120),rn(0,30))
			ctx.strokeStyle=rc(1,255)
			ctx.stroke()

			//20个干扰点
			for(var j=0;j<20;j++){
				ctx.beginPath()
				ctx.arc(rn(1,120),rn(0,30),1,0,2*Math.PI)
				ctx.fill();
			}
		}

		//返回随机数字
		function rn(min,max){
			var num = Math.random()*(max-min)+min
			return Math.floor(num);
		}

		//创建随机颜色
		function rc(min,max){
			var r = rn(min,max)
			var g = rn(min,max)
			var b = rn(min,max)
			var color = `rgb(${r},${g},${b})`
			return color;
		}
	</script>
</body>
</html>