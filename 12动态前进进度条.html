<!DOCTYPE html>
<html>
<head>
	<title>动态前进进度条</title>
	<style type="text/css">
	body{text-align:center}
		
	</style>
</head>
<body>
	<h1>动态前进进度条</h1>
	<canvas id="c3" width="500" height="400" style="background: #ddd"></canvas>

	<script type="text/javascript">

	

		var c3 = document.getElementById("c3")

		var ctx = c3.getContext("2d");

		

		//1绘制灰色底框
		ctx.beginPath();
		ctx.strokeStyle="#aaa"
		ctx.arc(250,200,100,0,2*Math.PI)
		ctx.lineWidth=15
		ctx.stroke()

		// 2创建2个变量  起始角度 与结束角度
		var start = -90
		var end = -90
		var num = 0	//描边进度条中的数字值
		var t = setInterval(function(){
			ctx.clearRect(0,0,500,400)

			ctx.beginPath();
			ctx.arc(250,200,100,0,2*Math.PI)
			ctx.strokeStyle = "#aaa"
			ctx.stroke()

			num+=1;
			if(num>=100) {
				num=100
				clearInterval(t)
			};
			ctx.font = "40px 楷体"
			ctx.fillText(num+"%",210,215)


			ctx.beginPath();
			end+=3.6
			//起始角度不变 终点角度一直+3.6 
			ctx.arc(250,200,100,start*Math.PI/180,end*Math.PI/180)
			var color = diy_color()
			// console.log(1,color)
			ctx.strokeStyle=color
			ctx.stroke()

		},100)

		// 3 创建定时器
		// 4 开始新路径
		// 5 绘制动态圆拱形


	function diy_color(){
			var r = parseInt(Math.random()*255);
			var g = parseInt(Math.random()*255);
			var b = parseInt(Math.random()*255);
			var color = `rgb(${r},${g},${b})`
			return color;
		}
		









		// /***********demo***********************/
		// ctx.beginPath()
		// var r=10;
		// var rDeirective = 1;
		// var timer = setInterval(function(){
		// 	ctx.clearRect(0,0,500,400)
		// 	r+=1*rDeirective;
		// 	if(r>=150){rDeirective=-1}
		// 	else if(r<=0) rDeirective=1;
		// 	ctx.arc(250,200,r,-Math.PI/2,3*Math.PI/2)

			// var r = Math.random()*255;
			// var g = Math.random()*255;
			// var b = Math.random()*255;
			// var color = `rgb(${r},${g},${b})`
			// ctx.strokeStyle=color;

		// 	ctx.stroke()


		//},50)
	
	</script>
</body>
</html>